
	var titleScope = [];
	titleScope.push({"age":"20대", "marriage":"싱글", "job":"직장인", "title":"<strong>보험이 너무 어렵게만 느껴지는 20대 <span>직장인</span>은<br>이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"20대", "marriage":"싱글", "job":"자영업", "title":"<strong>보험이 너무 어렵게만 느껴지는 20대 <span>자영업자</span>는<br>이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"20대", "marriage":"싱글", "job":"주부", "title":"<strong>보험이 너무 어렵게만 느껴지는 20대 <span>주부</span>는<br>이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"20대", "marriage":"결혼(자녀없음)", "job":"직장인",  "title":"<strong>행복한 결혼생활을 보내는 20대 <span>직장인</span>은<br>이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"20대", "marriage":"결혼(자녀없음)", "job":"자영업", "title":"<strong>행복한 결혼생활을 보내는 20대 <span>자영업자</span>는<br>이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"20대", "marriage":"결혼(자녀없음)", "job":"주부",    "title":"<strong>행복한 결혼생활을 보내는 20대 <span>주부</span>는<br>이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"20대", "marriage":"결혼(자녀있음)", "job":"직장인", "title":"<strong>우리 가족의 행복한 꿈을 위해 20대 <span>직장인</span>은<br>이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"20대", "marriage":"결혼(자녀있음)", "job":"자영업", "title":"<strong>우리 가족의 행복한 꿈을 위해 20대 <span>자영업자</span>는<br>이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"20대", "marriage":"결혼(자녀있음)", "job":"주부", "title":"<strong>우리 가족의 행복한 꿈을 위해 20대 <span>주부</span>는<br>이렇게 준비하세요.</strong>"});

	titleScope.push({"age":"30대", "marriage":"싱글", "job":"직장인", "title":"<strong>화려한 싱글라이프를 누리는 30대 <span>직장인</span>은<br>이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"30대", "marriage":"싱글", "job":"자영업", "title":"<strong>화려한 싱글라이프를 누리는 30대 <span>자영업자</span>는<br>이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"30대", "marriage":"싱글", "job":"주부", "title":"<strong>화려한 싱글라이프를 누리는 30대 <span>주부</span>는<br>이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"30대", "marriage":"결혼(자녀없음)", "job":"직장인",  "title":"<strong>행복한 결혼생활을 보내는 30대 <span>직장인</span>은<br>이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"30대", "marriage":"결혼(자녀없음)", "job":"자영업", "title":"<strong>행복한 결혼생활을 보내는 30대 <span>자영업자</span>는<br>이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"30대", "marriage":"결혼(자녀없음)", "job":"주부",    "title":"<strong>행복한 결혼생활을 보내는 30대 <span>주부</span>는<br>이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"30대", "marriage":"결혼(자녀있음)", "job":"직장인", "title":"<strong>우리 아이의 성장만큼 나도 준비해야 합니다. <br>30대 <span>직장인</span>이라면 이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"30대", "marriage":"결혼(자녀있음)", "job":"자영업", "title":"<strong>우리 아이의 성장만큼 나도 준비해야 합니다. <br>30대 <span>자영업자</span>라면 이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"30대", "marriage":"결혼(자녀있음)", "job":"주부", "title":"<strong>우리 아이의 성장만큼 나도 준비해야 합니다. <br>30대 <span>주부</span>라면 이렇게 준비하세요.</strong>"});

	titleScope.push({"age":"40대", "marriage":"싱글", "job":"직장인", "title":"<strong>나만의 라이프스타일을 즐기는 40대 <span>직장인</span>은 <br>이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"40대", "marriage":"싱글", "job":"자영업", "title":"<strong>나만의 라이프스타일을 즐기는 40대 <span>자영업자</span>는 <br>이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"40대", "marriage":"싱글", "job":"주부", "title":"<strong>나만의 라이프스타일을 즐기는 40대 <span>주부</span>는 <br>이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"40대", "marriage":"결혼(자녀없음)", "job":"직장인",  "title":"<strong>보험은 행복한 노후생활의 시작입니다. <br>40대 <span>직장인</span>이라면 이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"40대", "marriage":"결혼(자녀없음)", "job":"자영업", "title":"<strong>보험은 행복한 노후생활의 시작입니다. <br>40대 <span>자영업자</span>라면 이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"40대", "marriage":"결혼(자녀없음)", "job":"주부",    "title":"<strong>보험은 행복한 노후생활의 시작입니다. <br>40대 <span>주부</span>라면 이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"40대", "marriage":"결혼(자녀있음)", "job":"직장인", "title":"<strong>가족의 튼튼한 미래를 준비하는 40대 <span>직장인</span>은 <br>이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"40대", "marriage":"결혼(자녀있음)", "job":"자영업", "title":"<strong>가족의 튼튼한 미래를 준비하는 40대 <span>자영업자</span>는 <br>이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"40대", "marriage":"결혼(자녀있음)", "job":"주부", "title":"<strong>가족의 튼튼한 미래를 준비하는 40대 <span>주부</span>는 <br>이렇게 준비하세요.</strong>"});

	titleScope.push({"age":"50대", "marriage":"싱글", "job":"직장인", "title":"<strong>멋있는 중년 싱글의 조건! 50대 <span>직장인</span>은 <br>이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"50대", "marriage":"싱글", "job":"자영업", "title":"<strong>멋있는 중년 싱글의 조건! 50대 <span>자영업자</span>는 <br>이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"50대", "marriage":"싱글", "job":"주부", "title":"<strong>멋있는 중년 싱글의 조건! 50대 <span>주부</span>는 <br>이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"50대", "marriage":"결혼(자녀없음)", "job":"직장인",  "title":"<strong>제2의 인생은 지금부터! 50대 <span>직장인</span>은 <br>이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"50대", "marriage":"결혼(자녀없음)", "job":"자영업", "title":"<strong>제2의 인생은 지금부터! 50대 <span>자영업자</span>는 <br>이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"50대", "marriage":"결혼(자녀없음)", "job":"주부",    "title":"<strong>제2의 인생은 지금부터! 50대 <span>주부</span>는 <br>이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"50대", "marriage":"결혼(자녀있음)", "job":"직장인", "title":"<strong>우리 가족을 위한 가장 현명한 선택! <br>50대 <span>직장인</span>이라면 이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"50대", "marriage":"결혼(자녀있음)", "job":"자영업", "title":"<strong>우리 가족을 위한 가장 현명한 선택! <br>50대 <span>자영업자</span>라면 이렇게 준비하세요.</strong>"});
	titleScope.push({"age":"50대", "marriage":"결혼(자녀있음)", "job":"주부", "title":"<strong>우리 가족을 위한 가장 현명한 선택! <br>50대 <span>주부</span>라면 이렇게 준비하세요.</strong>"});

	var findInsuForm;
	var findInsuFormArray = [];
	var findInsuSaveArray = [];

	var totalValue;

	var calcCount = 0;
	
	function showFindInsuResult(enable) {
		if (enable) {
			$(".find-result").show();
		} else {
			$(".find-result").hide();
		}
	}

	function initStep() {
		$("#findStep").children().each(function(i) {
			if (i != 0) {
				//$(this).hide();
				$(this).removeClass("active");
			}
		});

		$("input[name=findGender]").attr("disabled", true);
		$("input[name=findWedding]").attr("disabled", true);
		$("input[name=findJob]").attr("disabled", true);
		$("#findCofirm").attr("disabled", true);

		$("#findCofirm").removeClass("on");

		$('#findStep input[type="radio"]').prop('checked', false);
		ui.setFormCheck();
	}

	function goNextStep(currentStepIndex) {

		if (currentStepIndex > $("#findStep").children().size() - 1) { return; }
		$($("#findStep").children()[currentStepIndex + 1]).addClass("active");

		switch (currentStepIndex) {
			case 0:
				$("input[name=findGender]").attr("disabled", false);
				break;
			case 1:
				$("input[name=findWedding]").attr("disabled", false);
				break;
			case 2:
				$("input[name=findJob]").attr("disabled", false);
				break;
			case 3:
				$("#findCofirm").attr("disabled", false);
				$("#findCofirm").addClass("on");
				break;
		}
	}

	function setAppropriateKeyword(objBirth, objGender, objWedding, objJob) {
		var age;
		var marriage;
		var gender;
		var job;

		if (!chkDate(objBirth.val())) {
			alert("생년월일을 올바르게 입력해주세요.");
			objBirth.val("");
			objBirth.focus();
			//initFindInsu();
			return false;
		}

		if (typeof(objGender) == "undefined") {
			return;
		}

		if (typeof(objWedding) == "undefined") {
			return;
		}

		if (typeof(objJob) == "undefined") {
			return;
		}

		age = getInsuAgeByYmd(objBirth.val());

		if (age < 20) {
			alert("20대 이하는 내게 맞는 보험찾기를 이용하실수 없습니다.");
			objBirth.focus();
			objBirth.val("");
			return;
		} else if (age >= 20 && age < 30) {
			age = "20대";
		} else if (age >= 30 && age < 40) {
			age = "30대";
		} else if (age >= 40 && age < 50) {
			age = "40대";
		} else if (age >= 50 && age < 60) {
			age = "50대";
		} else if (age >= 60) {
			alert("60대 이상은 내게 맞는 보험찾기를 이용하실수 없습니다.");
			objBirth.focus();
			objBirth.val("");
			return;
		}

		if (objWedding.val() == "1" && objJob.val() == "3") {
			alert("다른조건을 선택하여 주세요. 내게 맞는 보험찾기를 이용할수 없는 조건입니다.");

			showFindInsuResult(false);
			//initFindInsu();
			return false;
		}

		if (objGender.val() == "1") { gender = "남자"; }
		else if (objGender.val() == "2") { gender = "여자"; }

		if (objWedding.val() == "1") { marriage = "싱글"; }
		else if (objWedding.val() == "2") { marriage = "결혼(자녀없음)"; }
		else if (objWedding.val() == "3") { marriage = "결혼(자녀있음)"; }

		if (objJob.val() == "1") { job = "직장인"; }
		else if (objJob.val() == "2") { job = "자영업"; }
		else if (objJob.val() == "3") { job = "주부"; }

		if (typeof(age) == "undefined") {
			return;
		}

		if (typeof(marriage) == "undefined") {
			return;
		}

		if (typeof(gender) == "undefined") {
			return;
		}

		if (typeof(job) == "undefined") {
			return;
		}
		
		ga('send','event','mDirect','Calculation','Finding_Keyword',1);
			
		getFindInsuList(age, gender, marriage, job);
	}

	function getFindInsuList(age, gender, marriage, job) {

		findInsuFormArray = [];
		findInsuSaveArray = [];
		totalValue = 0;
		calcCount = 0;
		showFindInsuResult(false);
		gv_popCalcLoading.openOutput();
		
		var postData ={"age" : age, "gender" : gender, "marriage" : marriage, "job" : job};
		$.ajax({
			type : "POST",
			url : "/getFindInsuList.eds",
			data : JSON.stringify(postData),
			dataType : 'json',
			success : function(result) {
				if (result.success) {
					setFindInsuKeywordResult(result.list, age, gender, marriage, job);
					//showFindInsuResult(true);
				} else {
					alert("나만의 맞춤 키워드 정보를 가져올수 없습니다.");
				}
			},
			error : function() {
				alert("나만의 맞춤 키워드 정보를 가져올수 없습니다.");
			}
		});
	}

	function setFindInsuKeywordResult(list, age, gender, marriage, job) {
		if (typeof(list) == "undefined") { return; }
		if (list.length != 3) { return; }

		//	맞춤 키워드
		/*$("#findKeyword").children().each(function(i) {
			$(this).hide();
		});*/
		var index = 99;
		$("#findKeyword").children().each(function(i) {
			index = getKeywordIndex(list, i);
			$(this).find("strong").text($.trim(list[index].KEYWORD));
			$(this).find("span").text($.trim(list[index].KEYWORD_DESC));

			setKeywordIcon($.trim(list[index].KEYWORD), i);
		});

		//	추천 문구
		var obj;
		var title = "";
		var html = "";
		for (var i = 0; i < titleScope.length; i++) {
			obj = titleScope[i];

			if (obj.age == age && obj.marriage == marriage && obj.job == job) {
				title = obj.title;
			}
		}

		if (age == "20대") {
			title += "<span>보험은 부담이 아닌 편안한 노후와 건강한 삶을 위한 든든한 미래의 자산입니다.</span>";
		} else if (age == "30대") {
			title += "<span>사회활동과 경제활동이 가장 활발한 30대는 보험료와 보장금액이 유리합니다.</span>";
		} else if (age == "40대") {
			title += "<span>아직 늦지 않았습니다. 더 나은 미래를 위한 행복한 선택을 시작하세요.</span>";
		} else if (age == "50대") {
			title += "<span>편안한 노후와 건강한 삶을 위한 행복 보장! 아직 기회는 남아 있습니다.</span>";
		}
		$("#findKeywordTitle").html(title);

		//	추천 계산
		setRecommendCalc();
	}

	function getKeywordIndex(list, index) {
		var result = 99;
		var tmp = "";

		for (var i = 0; i < list.length; i++) {
			tmp = $.trim(list[i].KEYWORD);
			if (index == 0) {
				if (tmp == "노후" || tmp == "세액공제") {
					result = i;
					break;
				}
			} else if (index == 1) {
				if (tmp == "저축") {
					result = i;
					break;
				}
			} else if (index == 2) {
				if (tmp == "건강" || tmp == "가족") {
					result = i;
					break;
				}
			}
		}
		return result;
	}

	function setKeywordIcon(keyword, index) {
		var obj = $($("#findKeyword").children()[index]);
		obj.removeClass("icon1");
		obj.removeClass("icon2");
		obj.removeClass("icon3");
		obj.removeClass("icon4");
		obj.removeClass("icon5");

		if (keyword == "세액공제") {
			obj.addClass("icon1");
			obj.val("5");
		} else if (keyword == "저축") {
			obj.addClass("icon2");
			obj.val("4");
		} else if (keyword == "가족") {
			obj.addClass("icon3");
			obj.val("2");
		} else if (keyword == "건강") {
			obj.addClass("icon4");
			obj.val("1");
		} else if (keyword == "노후") {
			obj.addClass("icon5");
			obj.val("7");
		}
	}

	function setRecommendCalc() {
		$(".list-result2").empty();

		$("#findKeyword").children().each(function (i){
			switch ($(this).val()) {
				case 1:
					$(".list-result2").append(getCancerHtml());
					break;
				case 2:
					$(".list-result2").append(getTermHtml());
					break;
				case 4:
					$(".list-result2").append(getEsavingHtml());
					break;
				case 5:
					$(".list-result2").append(getAnnuityHtml());
					$("#findAnnuity").addClass("on");
					break;
				case 7:
					$(".list-result2").append(getIAnnuityHtml());
					$("#findIAnnuity").addClass("on");
					break;
			}
			findInsuCalc($(this).val());
		});

		//	클릭 이벤트
		$("[id^='findViewDetail']").on("click", function() {
			var id = $(this).attr("id").substr(("findViewDetail").length, 1);

			for (var i = 0; i < findInsuFormArray.length; i++) {
				if (parseInt(id) == findInsuFormArray[i].type) {
					findInsuFormArray[i].premium = parseInt(findInsuFormArray[i].premium) / 10000;

					var jsonData = JSON.stringify(findInsuFormArray[i].form);
					$.cookie("planData", jsonData ,{path:'/'});
					location.href = getPlanUrl(String(id));
					return;
				}
			}
		});

		$("[id^='findSubscribe']").on("click", function() {
			var id = $(this).attr("id").substr(("findSubscribe").length, 1);
			goSubscribe(id, 0);
		});

		//	ui 리로드
		$plugin.togglecon($('.list-result2 li > a'),{
			toggle_type : 'tab',
			selector_group : true,
			selector : '.list-result2 > li',
			selector_btn : '> a',
			selector_con : '> .box',
			class_open : "on",
		});
	}

	function getCancerHtml() {
		var html = '<!-- 암보험 -->' +
				   '<li class="pro1" id="findCaner">' +
				   '<a href="#none">' +
				   '<span>암보험</span>' +
				   '<span>월</span><strong id="findInsuCancerMonthlyPremiumTitle">0,000</strong><span>원</span>' +
				   '</a>' +
				   '<div class="box">' +
				   '<dl class="heading">' +
				   '<dt>암보험</dt>' +
				   '<dd class="form-wrap3">' +
				   '<span>월</span><strong class="text" id="findInsuCancerMonthlyPremium">0,000</strong><span>원</span>' +
				   '</dd>' +
				   '</dl>' +
				   '<ul class="data">' +
				   '<li>' +
				   '<div>보험기간</div>' +
				   '<div><strong id="findInsuCancerInsTerm">00</strong><span>년</span></div>' +
				   '</li>' +
				   '<li>' +
				   '<div>납입기간</div>' +
				   '<div><strong id="findInsuCancerNapTerm">00</strong><span>년</span></div>' +
				   '</li>' +
				   '<li>' +
				   '<div><a href="#tipProCon17" class="link-tip" title="용어설명">암분류 기준</a></div>' +
				   '</li>' +
				   '</ul>' +
				   '<ul class="con">' +
				   '<li>' +
				   '<div>일반암</div>' +
				   '<div><strong id="findInsuCancerGeneralAmt">0,000</strong><span>만원</span></div>' +
				   '</li>' +
				   '<li>' +
				   '<div>고액암</div>' +
				   '<div><strong id="findInsuCancerLargeAmt">0,000</strong><span>만원</span></div>' +
				   '</li>' +
				   '<li>' +
				   '<div>소액암</div>' +
				   '<div><strong id="findInsuCancerSmallAmt">000 ~ 000</strong><span>만원</span></div>' +
				   '</li>' +
				   '<li>' +
				   '<div>암사망</div>' +
				   '<div><strong id="findInsuCancerDeathAmt">0,000</strong><span>만원</span></div>' +
				   '</li>' +
				   '<li>' +
				   '<div>재진단</div>' +
				   '<div><strong id="findInsuCancerDiagnosisAmt">0,000</strong><span>만원</span></div>' +
				   '</li>' +
				   '</ul>' +
				   '<div class="btn-area2">' +
				   '<a href="#none" class="btn-type4" id="findViewDetail1" onclick="ga(\'send\',\'event\',\'mDirect\',\'Etc\',\'Finding_Keyword_Detail\',1);">상세보기</a>' +
				   '<a href="#none" class="btn-type4 c1" id="findSubscribe1" onclick="ga(\'send\',\'event\',\'mDirect\',\'Entry\',\'Finding_Keyword_Enroll\',1);">가입하기</a>' +
				   '</div>' +
				   '</div>' +
				   '</li>';

		return html;
	}


	function getTermHtml() {
		var html = '<!-- 정기보험 -->' +
				   '<li class="pro2" id="findTerm">' +
				   '<a href="#none">' +
				   '<span>정기보험</span>' +
				   '<span>월</span><strong id="findInsuTermMonthlyPremiumTitle">0,000</strong><span>원</span>' +
				   '</a>' +
				   '<div class="box">' +
				   '<dl class="heading">' +
				   '<dt>정기보험</dt>' +
				   '<dd class="form-wrap3">' +
				   '<span>월</span>' +
				   '<strong class="text" id="findInsuTermMonthlyPremium">0,000</strong>' +
				   '<span>원</span>' +
				   '</dd>' +
				   '</dl>' +
				   '<ul class="data">' +
				   '<li>' +
				   '<div>보험기간</div>' +
				   '<div><strong id="findInsuTermInsTerm">00</strong><span>년</span></div>' +
				   '</li>' +
				   '<li>' +
				   '<div>납입기간</div>' +
				   '<div><strong id="findInsuTermNapTerm">전기납</strong><span>년</span></div>' +
				   '</li>' +
				   '</ul>' +
				   '<ul class="con">' +
				   '<li>' +
				   '<div>사망보험금</div>' +
				   '<div>' +
				   '<strong id="findInsuTermDeathAmt">0,000</strong>' +
				   '<span>원</span>' +
				   '</div>' +
				   '</li>' +
				   '</ul>' +
				   '<div class="btn-area2">' +
				   '<a href="#none" class="btn-type4" id="findViewDetail2" onclick="ga(\'send\',\'event\',\'mDirect\',\'Etc\',\'Finding_Keyword_Detail\',1);">상세보기</a>' +
				   '<a href="#none" class="btn-type4 c1" id="findSubscribe2" onclick="ga(\'send\',\'event\',\'mDirect\',\'Entry\',\'Finding_Keyword_Enroll\',1);">가입하기</a>' +
				   '</div>' +
				   '</div>' +
				   '</li>';

		return html;
	}

	function getEsavingHtml() {
		var html = '<!-- 저축보험 -->' +
				   '<li class="pro6" id="findEsaving">' +
				   '<a href="#none">' +
				   '<span>저축보험</span>' +
				   '<span>월</span><strong id="findInsuEsavingMonthlyPremiumTitle">00</strong><span>만원</span>' +
				   '</a>' +
				   '<div class="box">' +
				   '<dl class="heading">' +
				   '<dt>저축보험</dt>' +
				   '<dd class="form-wrap3">' +
				   '<span>월</span>' +
				   '<strong class="text" id="findInsuEsavingMonthlyPremium">00</strong>' +
				   '<span>만원</span>' +
				   '</dd>' +
				   '</dl>' +
				   '<ul class="data">' +
				   '<li>' +
				   '<div>보험기간</div>' +
				   '<div><strong id="findInsuEsavingInsTerm">00</strong><span>년</span></div>' +
				   '</li>' +
				   '<li>' +
				   '<div>납입기간</div>' +
				   '<div><strong id="findInsuEsavingNapTerm">00</strong><span>년</span></div>' +
				   '</li>' +
				   '<li>' +
				   '<div>공시이율 : <strong id="findInsuEsavingNowRate">99.9%</strong>기준<a href="#tipProCon13" class="icon-tip">공시이율이란?</a></div>' +
				   '</li>' +
				   '</ul>' +
				   '<ul class="con">' +
				   '<li>' +
				   '<div>만기환급금</div>' +
				   '<div>' +
				   '<strong id="findInsuEsavingReturnMoney">00,000,000</strong>' +
				   '<span>원</span>' +
				   '</div>' +
				   '</li>' +
				   '<li>' +
				   '<div>환급률</div>' +
				   '<div>' +
				   '<strong id="findInsuEsavingReturnRatio">000.0</strong>' +
				   '<span>%</span>' +
				   '</div>' +
				   '</li>' +
				   '</ul>' +
				   '<div class="btn-area2">' +
				   '<a href="#none" class="btn-type4" id="findViewDetail4" onclick="ga(\'send\',\'event\',\'mDirect\',\'Etc\',\'Finding_Keyword_Detail\',1);">상세보기</a>' +
				   '<a href="#none" class="btn-type4 c1" id="findSubscribe4" onclick="ga(\'send\',\'event\',\'mDirect\',\'Entry\',\'Finding_Keyword_Enroll\',1);">가입하기</a>' +
				   '</div>' +
				   '</div>' +
				   '</li>';

		return html;
	}


	function getAnnuityHtml() {
		var html = '<!-- 연금저축보험 -->' +
				   '<li class="pro5" id="findAnnuity">' +
				   '<a href="#none">' +
				   '<span>연금저축보험</span>' +
				   '<span>월</span><strong id="findInsuAnnuityMonthlyPremiumTitle">00</strong><span>만원</span>' +
				   '</a>' +
				   '<div class="box">' +
				   '<dl class="heading">' +
				   '<dt>연금저축보험</dt>' +
				   '<dd class="form-wrap3">' +
				   '<span>월</span>' +
				   '<strong class="text" id="findInsuAnnuityMonthlyPremium">00</strong>' +
				   '<span>만원</span>' +
				   '</dd>' +
				   '</dl>' +
				   '<ul class="data">' +
				   '<li>' +
				   '<div>연금개시나이</div>' +
				   '<div><strong id="findInsuAnnuityAnnAge">00</strong><span>세</span></div>' +
				   '</li>' +
				   '<li>' +
				   '<div>납입기간</div>' +
				   '<div><strong id="findInsuAnnuityNapTerm">00</strong><span>년</span></div>' +
				   '</li>' +
				   '<li>' +
				   '<div>공시이율 : <strong id="findInsuAnnuityNowRate">99.9%</strong>기준<a href="#tipProCon13" class="icon-tip">공시이율이란?</a></div>' +
				   '</li>' +
				   '</ul>' +
				   '<ul class="con">' +
				   '<li>' +
				   '<div><a href="#tipProCon16" class="link-tip">최대<br/>세액공제액</a></div>' +
				   '<div>' +
				   '<strong id="findInsuAnnuityTax">00.0</strong>' +
				   '<span>만원</span>' +
				   '</div>' +
				   '</li>' +
				   '<li>' +
				   '<div>평생동안 매년<br/>수령하는 연금액</div>' +
				   '<div>' +
				   '<strong id="findInsuAnnuityMoney">00</strong>' +
				   '<span>만원</span>' +
				   '</div>' +
				   '</li>' +
				   '<li>' +
				   '<div>환급률</div>' +
				   '<div>' +
				   '<strong id="findInsuAnnuityRatio">000.0</strong>' +
				   '<span>%</span>' +
				   '</div>' +
				   '</li>' +
				   '</ul>' +
				   '<div class="btn-area2">' +
				   '<a href="#none" class="btn-type4" id="findViewDetail5" onclick="ga(\'send\',\'event\',\'mDirect\',\'Etc\',\'Finding_Keyword_Detail\',1);">상세보기</a>' +
				   '<a href="#none" class="btn-type4 c1" id="findSubscribe5" onclick="ga(\'send\',\'event\',\'mDirect\',\'Entry\',\'Finding_Keyword_Enroll\',1);">가입하기</a>' +
				   '</div>' +
				   '</div>' +
				   '</li>';

		return html;
	}


	function getIAnnuityHtml() {
		var html = '<!-- 연금보험 -->' +
				   '<li class="pro4" id="findIAnnuity">' +
				   '<a href="#none">' +
				   '<span>연금보험</span>' +
				   '<span>월</span><strong id="findInsuIannuityMonthlyPremiumTitle">00</strong><span>만원</span>' +
				   '</a>' +
				   '<div class="box">' +
				   '<dl class="heading">' +
				   '<dt>연금보험</dt>' +
				   '<dd class="form-wrap3">' +
				   '<span>월</span>' +
				   '<strong class="text" id="findInsuIannuityMonthlyPremium">00</strong>' +
				   '<span>만원</span>' +
				   '</dd>' +
				   '</dl>' +
				   '<ul class="data">' +
				   '<li>' +
				   '<div>연금개시나이</div>' +
				   '<div><strong id="findInsuIannuityAnnAge">00</strong><span>세</span></div>' +
				   '</li>' +
				   '<li>' +
				   '<div>납입기간</div>' +
				   '<div><strong id="findInsuIannuityNapTerm">00</strong><span>년</span></div>' +
				   '</li>' +
				   '<li>' +
				   '<div>공시이율 : <strong id="findInsuIannuityNowRate">99.9%</strong>기준<a href="#tipProCon13" class="icon-tip">공시이율이란?</a></div>' +
				   '</li>' +
				   '</ul>' +
				   '<ul class="con">' +
				   '<li>' +
				   '<div>매년 연금수령액</div>' +
				   '<div><strong id="findInsuIannuityMoney">0,000</strong><span>만원</span></div>' +
				   '</li>' +
				   '<li>' +
				   '<div>환급률</div>' +
				   '<div><strong id="findInsuIannuityRatio">000.0</strong><span>%</span></div>' +
				   '</li>' +
				   '</ul>' +
				   '<div class="btn-area2">' +
				   '<a href="#none" class="btn-type4" id="findViewDetail7" onclick="ga(\'send\',\'event\',\'mDirect\',\'Etc\',\'Finding_Keyword_Detail\',1);">상세보기</a>' +
				   '<a href="#none" class="btn-type4 c1" id="findSubscribe7" onclick="ga(\'send\',\'event\',\'mDirect\',\'Entry\',\'Finding_Keyword_Enroll\',1);">가입하기</a>' +
				   '</div>' +
				   '</div>' +
				   '</li>';

		return html;
	}

	function findInsuCalc(type) {
		//	상품구분  1: 암, 2: 정기, 3: 상해, 4: 저축, 5:연금저축, 7 :연금

		getFindInsuForm(type);
		findSetForm(type);
		findInsuFormArray.push({"type":type, "form" : findInsuForm});

		$.ajax({
			type : "POST",
			url : "/directCalc.eds",
			data : JSON.stringify(findInsuForm),
			dataType : 'json',
			success : function(result) {
				if (result.success) {
					findInsuDisplayResult(type, result);
					checkComplete(type, result.arryData.inputObj.planSeq);
					
					// 차이 마케팅 스크립트(보험료 설계 완료) 17.12.22
					fbq('track', 'ViewContent', {
					    value: result.arryData.totPremium,
					    currency: 'KRW',
					  });
					chai_at._chai_conv('', '', '', '', '', '', '', 1, result.arryData.inputObj.prdtnm, '', '', '0'); //큐브
					dablena('track', 'ViewContent');
					window._tfa = window._tfa || [];
				    _tfa.push({ notify: 'action',name: 'cv_quote' });
					// 차이 마케팅 스크립트(보험료 설계 완료) 17.12.22
				} else {
					alert(result.message);
				}
			}
		});
	}

	function checkComplete(type, planSeq) {
		calcCount += 1;

		findInsuSaveArray.push(
						{"saveType":"session", "insuType":type,
						 "phoneNo":"", "planIdx":"0",
						 "planSeq":planSeq, "planData":{}}
		);

		if (calcCount == 3) {
			showFindInsuResult(true);
			gv_popCalcLoading.closeOutput();
			$('html,body').animate({scrollTop : $('.find-result').eq(0).offset().top},600);

			$("#findInsuTotal").text("월 " + addCommas(totalValue) + "원");
		}
	}

	function findInsuDisplayResult(type, result) {

		switch (String(type)) {
			case M_PRODUCT_CANCER:
				findInsuSetCancerResult(result);
				break;
			case M_PRODUCT_TERM:
				findInsuSetTermResult(result);
				break;
			case M_PRODUCT_ESAVING:
				findInsuSetEsavingResult(result);
				break;
			case M_PRODUCT_ANNUITY:
				findInsuSetAnnuityResult(result);
				break;
			case M_PRODUCT_IANNUITY:
				findInsuSetIannuityResult(result);
				break;
		}
	}

	function findInsuSetCancerResult(result) {
		var data = result.arryData;
		
		var generalVal = data.gVal1;
		var largeVal = data.gVal2;
		var smallBeginVal = data.gVal3_1;
		var smallEndVal = data.gVal3_2;
		var deathVal = data.gVal4;
		var diagnosisVal = data.gVal5;
		
		//var generalVal = data.guaranteeArry[3].amt.replace("만원", "").replace(",", "");
		//var largeVal = data.guaranteeArry[19].amt.replace("만원", "").replace(",", "");
		//var largeValAmt = parseInt(generalVal) + parseInt(largeVal);
		//var smallBeginVal = data.guaranteeArry[12].amt.replace("만원", "").replace(",", "");
		//var smallEndVal = data.guaranteeArry[11].amt.replace("만원", "").replace(",", "");
		//var deathVal = data.guaranteeArry[16].amt.replace("만원", "").replace(",", "");

		
		//$("#findInsuCancerGeneralAmt").text(addCommas(data.guaranteeArry[3].contAmt));
		//$("#findInsuCancerLargeAmt").text(addCommas(largeValAmt));
		//$("#findInsuCancerSmallAmt").text(smallBeginVal + " ~ " + smallEndVal);
		//$("#findInsuCancerDeathAmt").text(addCommas(deathVal));
		
		
		$("#findInsuCancerInsTerm").text(result.arryData.inputObj.insuPeriod);
		$("#findInsuCancerNapTerm").text(result.arryData.inputObj.payPeriod);
		$("#findInsuCancerMonthlyPremiumTitle").text(addCommas(data.padSmtotPrm));
		$("#findInsuCancerMonthlyPremium").text(addCommas(data.padSmtotPrm));
		$("#findInsuCancerGeneralAmt").text(addCommas(generalVal));
		$("#findInsuCancerLargeAmt").text(addCommas(largeVal));
		$("#findInsuCancerSmallAmt").text(smallBeginVal + " ~ " + smallEndVal);
		$("#findInsuCancerDeathAmt").text(addCommas(deathVal));
		$("#findInsuCancerDiagnosisAmt").text(addCommas(diagnosisVal));

		totalValue += parseInt(data.padSmtotPrm);
	}

	function findInsuSetTermResult(result) {
		var data = result.arryData;

		$("#findInsuTermInsTerm").text(result.arryData.inputObj.insuPeriod);
		$("#findInsuTermNapTerm").text(result.arryData.inputObj.payPeriod);
		$("#findInsuTermMonthlyPremiumTitle").text(addCommas(data.padSmtotPrm));
		$("#findInsuTermMonthlyPremium").text(addCommas(data.padSmtotPrm));
		$("#findInsuTermDeathAmt").text(wonToStr3(data.deathAmt + "0000"));

		totalValue += parseInt(data.padSmtotPrm);
	}

	function findInsuSetEsavingResult(result) {
		var data = result.arryData;

		$("#findInsuEsavingNowRate").text(data.nowRate + "%");
		$("#findInsuEsavingInsTerm").text(result.arryData.inputObj.insuPeriod);
		$("#findInsuEsavingNapTerm").text(result.arryData.inputObj.payPeriod);
		$("#findInsuEsavingMonthlyPremiumTitle").text(addCommas(parseInt(data.totPremium / 10000)));
		$("#findInsuEsavingMonthlyPremium").text(addCommas(parseInt(data.totPremium / 10000)));
		$("#findInsuEsavingReturnMoney").text(addCommas(data.returnMoney));
		$("#findInsuEsavingReturnRatio").text(data.returnRatio);

		totalValue += parseInt(data.totPremium);
	}

	function findInsuSetAnnuityResult(result) {
		var data = result.arryData;
		var monthlyPremium = parseInt(data.totPremium / 10000);
		var taxCredit = (monthlyPremium * 12 * 16.5 / 100).toFixed(1);
		if (taxCredit >= 66) taxCredit = 66;

		$("#findInsuAnnuityNowRate").text(data.nowRate + "%");
		$("#findInsuAnnuityMonthlyPremiumTitle").text(monthlyPremium);
		$("#findInsuAnnuityMonthlyPremium").text(monthlyPremium);
		$("#findInsuAnnuityTax").text(taxCredit);
		$("#findInsuAnnuityMoney").text(addCommas(parseInt(data.annuityMoney / 10000)));
		$("#findInsuAnnuityRatio").text(data.returnRatio);

		totalValue += parseInt(data.totPremium);
	}

	function findInsuSetIannuityResult(result) {
		var data = result.arryData;

		$("#findInsuIannuityNowRate").text(data.nowRate + "%");
		$("#findInsuIannuityMonthlyPremiumTitle").text(addCommas(parseInt(data.totPremium / 10000)));
		$("#findInsuIannuityMonthlyPremium").text(addCommas(parseInt(data.totPremium / 10000)));
		$("#findInsuIannuityMoney").text(addCommas(parseInt(data.nowTime10 / 10000)));
		$("#findInsuIannuityRatio").text(data.returnRatio);

		totalValue += parseInt(data.totPremium);
	}

	function getFindInsuForm(type) {
		var jsonData = '{"insuranceType":"' + type + '"}';

		$.ajax({
			type : "POST",
			url : "/planDirect.eds",
			data : jsonData,
			dataType : 'json',
			async : false,
			success : function(result) {
				if (result.success) {

					findInsuForm = new Object();
					findInsuForm.calcType = "find";
					findInsuForm.proType = result.product.proType;
					findInsuForm.prcdId = result.product.id;
					findInsuForm.prcd = result.product.pcode;
					findInsuForm.prdtVcd = result.product.pvcode;
					findInsuForm.insCd = result.product.icode;
					findInsuForm.insrVcd = type == M_PRODUCT_CANCER ? result.product.pvcode : "001";
					findInsuForm.repCd = result.product.slpcode;
					findInsuForm.prdtnm = result.product.fullNm;
					findInsuForm.contName = "고객님";
					findInsuForm.contBirth = "";
					findInsuForm.contGender = "";
					findInsuForm.insuPeriod = "";
					findInsuForm.payMethod = "";
					findInsuForm.payPeriod = "";
					findInsuForm.premium = "";
					findInsuForm.planSeq = "";

					// 암
					if (type == M_PRODUCT_CANCER) {
						findInsuForm.mainContAmt = "10000000";
						findInsuForm.treatyContAmt = "40000000";
					}

					// 정기
					if (type == M_PRODUCT_TERM) {
						findInsuForm.insrPrdTypCd = "";
						findInsuForm.padPrdTypCd = "";
						findInsuForm.freeCont = "100000000";
					}

					//	연금, 연금저축
					if (type == M_PRODUCT_IANNUITY || type == M_PRODUCT_ANNUITY) {
						findInsuForm.annuityAge = "";
					}
				} else {
					alert(result.message);
				}
			},
			error : function() {
				alert("error");
			}
		});
	}

	function findSetForm(type) {
		var age = getInsuAgeByYmd($("#findBirthday").val());

		findInsuForm.contBirth = $("#findBirthday").val();
		findInsuForm.contGender = $("input[name=findGender]:checked").val();

		switch (type) {
			case 1 :	//	암
				findInsuForm.payPeriod = 10;
				findInsuForm.insuPeriod = 10;
				break;
			case 2 :	//	정기
				findInsuForm.payPeriod = 20;
				findInsuForm.insuPeriod = 20;
				findInsuForm.padPrdTypCd = "01"
				findInsuForm.insrPrdTypCd = "01";
				break;
			case 4 :	//	저축
				findInsuForm.payPeriod = 5;
				findInsuForm.insuPeriod = 10;
				findInsuForm.premium = 300000;
				break;
			case 5 :	//	연금저축
				if (age >= 56 && age <= 69){
					findInsuForm.payPeriod = 10;
					findInsuForm.annuityAge = age + 10;
				} else if (age >= 70 && age <= 75){
					findInsuForm.payPeriod = 5;
					findInsuForm.annuityAge = age + 5;
				} else {
					findInsuForm.payPeriod = 10;
					findInsuForm.annuityAge = 65;
				}
				findInsuForm.premium = 340000;

				$("#findInsuAnnuityAnnAge").text(findInsuForm.annuityAge);
				$("#findInsuAnnuityNapTerm").text(findInsuForm.payPeriod);

				break;
			case 7 :	//	연금
				if (age >= 51 && age <= 65){
					findInsuForm.payPeriod = 10;
					findInsuForm.annuityAge = age + 15;
				} else {
					findInsuForm.payPeriod = 10;
					findInsuForm.annuityAge = 65;
				}
				findInsuForm.premium = 300000;

				$("#findInsuIannuityAnnAge").text(findInsuForm.annuityAge);
				$("#findInsuIannuityNapTerm").text(findInsuForm.payPeriod);
				break;
		}
	}